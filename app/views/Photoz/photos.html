#{extends 'main.html' /}
#{set title:'所有照片'/}
#{include 'Photoz/_userbar.html'/}
#{script 'jquery.jeditable.js'/}
<script>
	$(document).ready(function(){		
		//$('div[id=cap]').editor();
		$('div[id=cap]').editable('@{Photoz.caption()}',{name:'val',onblur:'ignore', submit:'保存',cancel:'取消'});
		$('div[id=desc]').editable('@{Photoz.desc()}',{name:'val',onblur:'ignore', submit:'保存',cancel:'取消',rows:'2',type:'textarea'});
		//$('div[id=desc]').click(doedit);
	});
</script>
#{table items:photos,as:'photo',cols:3}
	#{td id:"captd"} <div id='cap' >${photo.caption}</div>#{/td}
	#{td id:"imgtd"} 
		<div class='imgbock'><a href='@{Photoz.viewPhoto(photo.author.fullname,photo.id)}'>#{photo photo:photo,as:'240'/}</a></div>
		<div><div id='desc' >${photo.description?photo.description:'点击这里写修改描述'}</div></div>
		<div id='info' vpid='${photo.id}'>更新于${photo.uploadAt.format('yyyy/mm/dd')}<a onclick='deletePhoto(this)' >删除</a><a href='@{Photoz.viewPhoto(photo.author.fullname,photo.id)}'>查看</a>
	#{/td}
#{/table}

<div style="clear:both">  
#{if page > 1 }
  <div class="grid_3 alpha" style="display:inline;" id="prev">
	<a href="@{Photoz.photos(user.fullname,page-1)}">&{'PreviousPage'}</a>
  </div>
#{/if}

#{if totalCount> page + pageSize}
  <div class="grid_3 omega float-right" style="display:inline;"  id="next">
	<a href="@{Photoz.photos(user.fullname,page+1)}">&{'NextPage'}</a>
  </div>
#{/if}
</div>